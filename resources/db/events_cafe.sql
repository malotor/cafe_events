CREATE TABLE events (aggregate_id VARCHAR(255) NOT NULL, type CLOB NOT NULL, created_at CLOB NOT NULL, data CLOB NOT NULL, PRIMARY KEY(aggregate_id));
CREATE TABLE items (item_id INTEGER NOT NULL, description VARCHAR(50) NOT NULL, price NUMERIC(10, 0) NOT NULL, PRIMARY KEY(item_id));
CREATE TABLE tabs (tab_id VARCHAR(255) NOT NULL, waiter VARCHAR(50) NOT NULL, tableNumber VARCHAR(50) NOT NULL, PRIMARY KEY(tab_id));
CREATE TABLE tabs_outstanding_drinks (tabId VARCHAR(255) NOT NULL, itemId INTEGER NOT NULL, PRIMARY KEY(tabId, itemId), CONSTRAINT FK_AAEEEEC269DD6F37 FOREIGN KEY (tabId) REFERENCES tabs (tab_id) NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_AAEEEEC2B5F8B771 FOREIGN KEY (itemId) REFERENCES items (item_id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE INDEX IDX_AAEEEEC269DD6F37 ON tabs_outstanding_drinks (tabId);
CREATE UNIQUE INDEX UNIQ_AAEEEEC2B5F8B771 ON tabs_outstanding_drinks (itemId);
CREATE TABLE tabs_outstanding_foods (tabId VARCHAR(255) NOT NULL, itemId INTEGER NOT NULL, PRIMARY KEY(tabId, itemId), CONSTRAINT FK_DE753D7769DD6F37 FOREIGN KEY (tabId) REFERENCES tabs (tab_id) NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_DE753D77B5F8B771 FOREIGN KEY (itemId) REFERENCES items (item_id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE INDEX IDX_DE753D7769DD6F37 ON tabs_outstanding_foods (tabId);
CREATE UNIQUE INDEX UNIQ_DE753D77B5F8B771 ON tabs_outstanding_foods (itemId);
CREATE TABLE tabs_prepared_foods (tabId VARCHAR(255) NOT NULL, itemId INTEGER NOT NULL, PRIMARY KEY(tabId, itemId), CONSTRAINT FK_B23E507069DD6F37 FOREIGN KEY (tabId) REFERENCES tabs (tab_id) NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_B23E5070B5F8B771 FOREIGN KEY (itemId) REFERENCES items (item_id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE INDEX IDX_B23E507069DD6F37 ON tabs_prepared_foods (tabId);
CREATE UNIQUE INDEX UNIQ_B23E5070B5F8B771 ON tabs_prepared_foods (itemId);
CREATE TABLE tabs_served_items (tabId VARCHAR(255) NOT NULL, itemId INTEGER NOT NULL, PRIMARY KEY(tabId, itemId), CONSTRAINT FK_2572606069DD6F37 FOREIGN KEY (tabId) REFERENCES tabs (tab_id) NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_25726060B5F8B771 FOREIGN KEY (itemId) REFERENCES items (item_id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE INDEX IDX_2572606069DD6F37 ON tabs_served_items (tabId);
CREATE UNIQUE INDEX UNIQ_25726060B5F8B771 ON tabs_served_items (itemId);
